<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube</title>
    <link rel="icon" type="image/png" href="/assets/img/youtube.png" />
    <link rel="stylesheet" href="../css/header.css">
    <link rel="stylesheet" href="../css/nav.css">
    <link rel="stylesheet" href="../css/video.css">

    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
</head>
<body class="video-page"><!-- sidebar toggle용 class -->
    <!-- header : 홈 화면 상단바 -->
    <%- include('partials/header') %>

    <%- include('partials/nav') %>
    
    <!--전체 화면 -->
    <div class="video-page-container">
        <!--본 영상 영역-->
        <main class="video-main">
            <!--영상 재생 영역-->
            <section class="video-player">
                <video controls autoplay width="100%">
                    <source src="https://storage.googleapis.com/youtube-clone-video/<%= videoInfo.id %>.mp4" type="video/mp4">
                    동영상을 찾을 수 없습니다.
                </video>
            </section>

            <!--영상 제목 및 정보-->
            <section class="video-title-info">
                <!-- 제목 -->
                <span class="video-player-title"><%= videoInfo.title %></span>

                <div class="video-stats">
                    <!-- 조회수, 날짜 -->
                    <span class="video-meta">
                        <%= videoInfo.views.toLocaleString() %> views • <%= getRelativeTime(videoInfo.created_dt) %>
                    </span>

                    <!-- 좋아요, 싫어요, 공유, 저장, 더보기 -->
                    <div class="video-actions">
                        <div class="action-button">
                            <button><img class="action-img" src="../assets/icons/like2.svg" alt="Like" />
                            <span class="action-text"><%= videoInfo.likes.toLocaleString() %></span></button>
                        </div>
                        <div class="action-button">
                            <button><img class="action-img" src="../assets/icons/dislike2.svg" alt="Dislike" />
                            <span class="action-text"><%= videoInfo.dislikes.toLocaleString() %></span></button>
                        </div>
                        <div class="action-button">
                            <button><img class="action-img" src="../assets/icons/share2.svg" alt="Share" />
                            <span class="action-text">SHARE</span></button>
                        </div>
                        <div class="action-button">
                            <button><img class="action-img" src="../assets/icons/save2.svg" alt="Save" />
                            <span class="action-text">SAVE</span></button>
                            <!-- 저장 모달 -->
                            <div class="save-modal">
                                <div class="save-modal-content">
                                    <button class="save-option-btn"><img src="../assets/icons/save-offline.svg" alt="Download"><span class="save-text">Download</span></button>
                                    <button class="save-option-btn"><img src="../assets/icons/save-online.svg" alt="Save"><span class="save-text">Save</span></button>
                                </div>
                            </div>
                            <!-- 저장 모달 -->
                        </div>
                        <div class="action-button">
                            <button class="action-text"><img class="action-img" src="../assets/icons/more2.svg" alt="More" /></button>
                            <!-- 더보기 모달 -->
                            <div class="more-modal">
                                <div class="more-modal-content">
                                    <button class="more-option-btn"><img src="../assets/icons/report.svg" alt="report"><span class="report-text">Report</span></button>
                                </div>
                            </div>
                            <!-- 더보기 모달 -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- 채널 정보 -->
            <section class="channel-info">
                <div class="channel-info-top">
                    <!-- 채널 프로필 정보 -->
                    <a href="/channel?id=<%= channelInfo.id %>" class="channel-owner" style="text-decoration: none; color: inherit;">
                        <!-- 채널 프로필 이미지 -->
                        <img class="channel-owner-img" src="<%= channelInfo.channel_profile %>" alt="<%= channelInfo.channel_name %> profile" />
                        
                        <!-- 채널 이름, 구독자 수 -->
                        <div class="channel-owner-info">
                            <span class="channel-owner-name"><%= channelInfo.channel_name %></span><br>
                            <span class="channel-subscription"><%= channelInfo.subscribers.toLocaleString() %> subscribers</span>
                        </div>
                    </a>
                    <!-- 구독 버튼 -->
                    <button class="subscribe-btn">SUBSCRIBE</button>
                </div>
                <!-- 설명은 API에 없으니까 이 아래 부분은 주석처리 -->
                <!--<div>
                    <p class="channel-description">
                        설명이 들어갈 자리 (API 없으므로 생략)
                    </p>  
                    <button class="show-more">SHOW MORE</button>  
                </div>-->
            </section>

            <!-- 댓글 영역 -->
            <section class="comments-section">
                    <!-- 댓글 수 및 정렬 -->
                    <div class="comments-header">
                        <div class="sort">
                            <span class="comments-num">0 Comments</span>
                            <button class="sortby-btn">
                                <img class="sortby-img" src="../assets/icons/list filter.png" alt="Sort icon">
                                <span>SORT BY</span>
                            </button>
                            <!-- 정렬 모달 -->
                            <div class="sortby-modal">
                                <div class="sortby-modal-content">
                                    <button class="sortby-option-btn"><span class="sortby-text">Top comments</span></button>
                                    <button class="sortby-option-btn"><span class="sortby-text">Newest first</span></button>
                                </div>
                            </div>
                            <!-- 정렬 모달 -->
                        </div>
                    </div> 
                    <!-- 댓글 입력 -->
                    <div class="comment-input">
                        <img class="input-img" src="../assets\img\Profile-pic.svg" alt="profile img">
                        <input class="input-text" type="text" placeholder="Add a public comment...">
                    </div>
                    <!-- 댓글 리스트 -->
                    <div class="comment">
                        <!-- <div class="comment-flex">
                            <img class="input-img" src="../assets\img\JamesGouse.svg" alt="JamesGouse">
                            <div class="commnet-body">
                                <div class="comment-meta">
                                    <span class="comment-body-name">James Gouse</span>
                                    <span class="comment-body-date">8 hours ago</span>
                                </div>
                                <span class="comment-body-detail">Wow, world is full of different skills</span>
                                <div class="comment-actions">
                                    <button><img src="../assets/icons/like.svg" alt="Like"></button><span>3</span>
                                    <button><img src="../assets/icons/dislike.svg" alt="Dislike"></button>
                                    <button>REPLY</button>
                                </div>
                            </div>
                        </div>
                        <div class="comment-flex">
                            <img class="input-img" src="../assets\img\AlanCooper.svg" alt="AlanCooper">
                            <div class="commnet-body">
                                <div class="comment-meta">
                                    <span class="comment-body-name">Alan Cooper</span>
                                    <span class="comment-body-date">4 days ago</span>
                                </div>
                                <span class="comment-body-detail">Can you provide?<br><br>On January 2, 2022</span>
                                <div class="comment-actions">
                                    <button><img src="../assets/icons/like.svg" alt="Like"></button><span>10</span>
                                    <button><img src="../assets/icons/dislike.svg" alt="Dislike"></button>
                                    <button>REPLY</button>
                                </div>
                            </div>
                        </div> -->
                    </div>
                </section>
        </main>

        <!--추천 영상 영역-->
        <section class="recommended-videos">
            <!--추천 영상 필터-->
            <nav class="recommended-tag">
                <button>All</button>
                <button>From Marcus Levin</button>
            </nav>
            <!--추천 영상 카드-->
            <div class="recommended-list">
                <article class="video-card">
                    <% recommendedVideos.forEach(video => { %>
                        <%- include('partials/videoCard-video', { video: video, getRelativeTime: getRelativeTime }) %>
                    <% }); %>
                </article>  
            </div>                         
        </section>
    </div>
    <!-- 댓글 기능 -->

    <!-- 공유 모달 -->
    <div class="share-modal">
        <div class="share-box">
            <div class="share-header">
                <span>SHARE</span>
                <button class="close-modal">&times;</button>
            </div>
            <div class="link-container">
                <input 
                    type="text" 
                    id="share-link" 
                    value="https://localhost:3000/video?id=<%= videoInfo.id %>" 
                    readonly
                >
                <button class="copy-btn">copy</button>
            </div>
        </div>
    </div>
    <!-- 공유 모달 -->
    <script src="/js/comment.js"></script>
    <script src="../js/button.js"></script>
    <script src="../js/video_search.js"></script>
    <script src="/js/thumbnail-play.js"></script>
</body>
</html>